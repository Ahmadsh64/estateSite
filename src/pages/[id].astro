---
import i18next from "../i18n";
import { supabase } from "../lib/supabaseClient";
import type { Property } from "../types/property";  // ×™×™×‘×•× ×˜×™×¤×•×¡ Property

const { params } = Astro;
const id = params.id;

let property: Property | null = null; // ×”×’×“×¨×ª property ×›-Property ××• null

// ×©×œ×™×¤×ª ×”×“×™×¨×” ×œ×¤×™ ID ×-Supabase
const { data, error } = await supabase
  .from("properties")
  .select("*")
  .eq("id", id)
  .single();

if (error) {
  console.error("×©×’×™××” ×‘×©×œ×™×¤×ª ×”×“×™×¨×”:", error.message);
} 
if (data) {
  // ×”××¨×ª ×”× ×ª×•× ×™× ×œ×˜×™×¤×•×¡ Property
  property = {
    id: data.id,
    title: data.title,
    price: data.price,
    location: {
      city: data.city || "",
      street: data.street || "",
      number: data.number || "",
      floor: data.floor || "",
    },
    description: data.description || "",
    images: data.images || [],
    occupancy: data.occupancy,
    bedrooms: data.bedrooms,
    beds: data.beds,
    bathrooms: data.bathrooms,
    kitchen: data.kitchen, 
    washingmachine: data.washingmachine,
    wifi: data.wifi,
    tv: data.tv,
    publictransportnearby: data.publictransportnearby,
    parking: data.parking,
    checkintime: data.checkintime,
    checkouttime: data.checkouttime,
    minStayDays: data.minStayDays,
    type: data.type,
    is_active: data.is_active, // ×”×•×¡×¤×ª ×”×©×“×” ×”×—×¡×¨
    created_at: data.created_at,
    has_pool: data.has_pool,            // ×‘×¨×™×›×”
    has_private_pool: data.has_private_pool,    // ×‘×¨×™×›×” ×¤×¨×˜×™×ª
    has_jacuzzi: data.has_jacuzzi,          // ×’'×§×•×–×™
    has_grill: data.has_grill,            // ×× ×’×œ
    suitable_for: data.suitable_for,        // ××ª××™× ×œ: ××©×¤×—×•×ª, ×“×ª×™×™×, ×§×‘×•×¦×•×ª
    nearby: data.nearby,            // ×‘×§×¨×‘×ª ×”××§×•×: ×‘×™×ª ×›× ×¡×ª, ××¡×¢×“×•×ª, ×ª×—×‘×•×¨×” ×¦×™×‘×•×¨×™×ª
    rating: data.rating,               // ×“×™×¨×•×’
    reviews_count: data.reviews_count,        // ××¡×¤×¨ ×—×•×•×ª ×“×¢×ª
    phone: data.phone,                // ××¡×¤×¨ ×˜×œ×¤×•×Ÿ
    whatsapp: data.whatsapp,             // ××¡×¤×¨ WhatsApp
  };
}

const images = property ? (Array.isArray(property.images) ? property.images : [property.images]) : [];
---

<html lang="he">
  <head>
    <meta charset="UTF-8" />
    <title>{property ? property.title : i18next.t("property.notFound")}</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body dir="rtl">
    <header class="detail-header">
      <a href="/" class="detail-back-btn">â¬… {i18next.t("property.backToList")}</a>
    </header>

    <main class="detail-container-fullwidth">
      {property ? (
        <>
          <!-- ×›×•×ª×¨×ª ×”× ×›×¡ -->
          <div class="property-header-fullwidth">
            <div class="property-title-section">
              <h1 class="property-title-main">{property.title}</h1>
              <div class="property-location-info">
                <span class="location-text">{property.location.city}, {property.location.street}, {property.location.number}</span>
                {property.location.floor && <span class="floor-text"> - {i18next.t("property.floor")} {property.location.floor}</span>}
              </div>
              <div class="property-rating-info">
                <span class="rating-stars">â­ {property.rating || i18next.t("property.noRating")}</span>
                <span class="rating-text">{i18next.t("property.excellent")}</span>
                <span class="reviews-count">({property.reviews_count || 0} {i18next.t("property.reviews")})</span>
              </div>
            </div>
            <div class="property-contact-buttons">
              <button class="contact-btn-primary" onclick={`window.location.href='tel:${property.phone}'`}>
                ğŸ“ {i18next.t("property.call")}
</button>
              <button class="contact-btn-whatsapp" onclick={`window.location.href='https://wa.me/${property.whatsapp}?text=${encodeURIComponent('×©×œ×•×, ×× ×™ ××¢×•× ×™×™×Ÿ ×œ×©××•×œ ×¢×œ ×”×“×™×¨×”: ' + property.title)}'`}>
                ğŸ’¬ {i18next.t("property.whatsapp")}
              </button>
            </div>
          </div>

          <!-- ×¤×¨×™×¡×” ×¨××©×™×ª - ×ª××•× ×•×ª ×•×¤×¨×˜×™× -->
          <div class="main-content-layout">
            <!-- ×’×œ×¨×™×™×ª ×ª××•× ×•×ª ×’×“×•×œ×” -->
            <div class="gallery-section">
              <div class="main-image-container-fullwidth">
                <img id="detailMainImage" src={images[0]} alt={property?.title} class="detail-main-image-fullwidth" />
                <div class="image-counter">
                  <span id="currentImageIndex">1</span> / <span id="totalImages">{images.length}</span>
                </div>
              </div>

              <div class="thumbnail-gallery-fullwidth">
                {images.slice(0, 8).map((img, i) => (
                  <img
                    src={img}
                    alt={`×ª××•× ×” ${i + 1} ×©×œ ${property?.title}`}
                    class="detail-thumb-fullwidth"
                    data-index={i}
                  />
                ))}
                {images.length > 8 && (
                  <div class="more-images-fullwidth" onclick="openGallery()">+{images.length - 8}</div>
                )}
              </div>

              <!-- ×¤×¨×˜×™ ×”× ×›×¡ ××ª×—×ª ×œ×ª××•× ×•×ª -->
              <div class="property-details-under-gallery">
                <div class="property-details-card">
                  <h3 class="details-title">{i18next.t("property.details")}</h3>
                  <div class="property-summary">
                    <div class="summary-item">
                      <span class="summary-label">{i18next.t("property.pricePerNight")}:</span>
                      <span class="summary-value">{property.price.toLocaleString("he-IL")} â‚ª</span>
                    </div>
                    <div class="summary-item">
                      <span class="summary-label">{i18next.t("property.bedrooms")}:</span>
                      <span class="summary-value">{property.bedrooms}</span>
                    </div>
                    <div class="summary-item">
                      <span class="summary-label">{i18next.t("property.bathrooms")}:</span>
                      <span class="summary-value">{property.bathrooms}</span>
                    </div>
                    <div class="summary-item">
                      <span class="summary-label">{i18next.t("property.maxGuests")}:</span>
                      <span class="summary-value">{property.occupancy}</span>
                    </div>
                  </div>
                </div>
              </div>

<!-- ×¡×§×¦×™×•×ª × ×•×¡×¤×•×ª ×›××• ×‘×•×•×™×§× ×“ -->
          <div class="property-sections">
            <!-- ×ª×™××•×¨ ××¤×•×¨×˜ -->
            <div class="property-description-section">
              <h2 class="section-title">××•×“×•×ª ×”××§×•×</h2>
              <div class="description-content">
                <p class="property-description-text">{property.description}</p>
              </div>
            </div>

            <!-- ××ª×§× ×™× ×•×¤×™×¦'×¨×™× -->
            <div class="amenities-section">
              <h2 class="section-title">××” ×™×© ×‘××§×•×</h2>
              <div class="amenities-grid">
                <div class="amenity-category">
                  <h3 class="amenity-category-title">××ª×§× ×™× ×›×œ×œ×™×™×</h3>
                  <div class="amenity-items">
                    {property.kitchen && <div class="amenity-item">ğŸ³ ××˜×‘×—</div>}
                    {property.washingmachine && <div class="amenity-item">ğŸ§º ××›×•× ×ª ×›×‘×™×¡×”</div>}
                    {property.wifi && <div class="amenity-item">ğŸ“¶ WiFi</div>}
                    {property.tv && <div class="amenity-item">ğŸ“º ×˜×œ×•×•×™×–×™×”</div>}
                    {property.parking && <div class="amenity-item">ğŸ…¿ï¸ ×—× ×™×”</div>}
                    {property.publictransportnearby && <div class="amenity-item">ğŸšŒ ×ª×—×‘×•×¨×” ×¦×™×‘×•×¨×™×ª</div>}
                  </div>
                </div>

                <div class="amenity-category">
                  <h3 class="amenity-category-title">××ª×§× ×™× ×—×™×¦×•× ×™×™×</h3>
                  <div class="amenity-items">
                    {property.has_pool && <div class="amenity-item">ğŸŠ ×‘×¨×™×›×”</div>}
                    {property.has_private_pool && <div class="amenity-item">ğŸŠâ€â™€ï¸ ×‘×¨×™×›×” ×¤×¨×˜×™×ª</div>}
                    {property.has_jacuzzi && <div class="amenity-item">ğŸ› ×’'×§×•×–×™</div>}
                    {property.has_grill && <div class="amenity-item">ğŸ”¥ ×× ×’×œ</div>}
                  </div>
                </div>

                <div class="amenity-category">
                  <h3 class="amenity-category-title">××ª××™× ×œ</h3>
                  <div class="amenity-items">
                    {Array.isArray(property.suitable_for) && property.suitable_for.map((group) => (
                      <div class="amenity-item">ğŸ‘¥ {group}</div>
                    ))}
                  </div>
                </div>

                <div class="amenity-category">
                  <h3 class="amenity-category-title">×‘×§×¨×‘×ª ××§×•×</h3>
                  <div class="amenity-items">
                    {Array.isArray(property.nearby) && property.nearby.map((place) => (
                      <div class="amenity-item">ğŸ“ {place}</div>
                    ))}
                  </div>
                </div>
              </div>
            </div>

            <!-- ×¤×¨×˜×™ ×©×”×™×™×” -->
            <div class="stay-details-section">
              <h2 class="section-title">×¤×¨×˜×™ ×©×”×™×™×”</h2>
              <div class="stay-details-grid">
                <div class="stay-detail-item">
                  <span class="stay-detail-label">×©×¢×ª ×›× ×™×¡×”:</span>
                  <span class="stay-detail-value">{property.checkintime || "×œ× ×¦×•×™×Ÿ"}</span>
                </div>
                <div class="stay-detail-item">
                  <span class="stay-detail-label">×©×¢×ª ×™×¦×™××”:</span>
                  <span class="stay-detail-value">{property.checkouttime || "×œ× ×¦×•×™×Ÿ"}</span>
                </div>
                <div class="stay-detail-item">
                  <span class="stay-detail-label">××™× ×™××•× ×œ×™×œ×•×ª:</span>
                  <span class="stay-detail-value">{property.minStayDays || 1} ×œ×™×œ×•×ª</span>
                </div>
                <div class="stay-detail-item">
                  <span class="stay-detail-label">××§×¡×™××•× × ×•×¤×©×™×:</span>
                  <span class="stay-detail-value">{property.occupancy} ×× ×©×™×</span>
                </div>
              </div>
            </div>

            <!-- ×¤×¨×˜×™ ×™×¦×™×¨×ª ×§×©×¨ -->
            <div class="contact-details-section">
              <h2 class="section-title">×¤×¨×˜×™ ×™×¦×™×¨×ª ×§×©×¨</h2>
              <div class="contact-details-grid">
                <div class="contact-detail-item">
                  <span class="contact-detail-label">×˜×œ×¤×•×Ÿ:</span>
                  <span class="contact-detail-value">
                    {property.phone ? (
                      <a href={`tel:${property.phone}`} class="contact-link">{property.phone}</a>
                    ) : (
                      "×œ× ×–××™×Ÿ"
                    )}
                  </span>
                </div>
                <div class="contact-detail-item">
                  <span class="contact-detail-label">WhatsApp:</span>
                  <span class="contact-detail-value">
                    {property.whatsapp ? (
                      <a href={`https://wa.me/${property.whatsapp}`} class="contact-link" target="_blank">{property.whatsapp}</a>
                    ) : (
                      "×œ× ×–××™×Ÿ"
                    )}
                  </span>
                </div>
              </div>
            </div>
          </div>


            </div>

            <!-- ×¦×“ ×™××™×Ÿ - ××¤×” ×•×˜×•×¤×¡ -->
            <div class="sidebar-section">
              <!-- ××¤×” -->
              <div class="map-card">
                <div class="map-preview-fullwidth" onclick="openGoogleMaps()">
                  <img src="/images/map.png" alt={i18next.t("property.map")} class="map-preview-img-fullwidth" />
                  <div class="map-overlay-text-fullwidth">
                    <span class="map-icon">ğŸ“</span>
                    <span>{i18next.t("property.openMap")}</span>
                  </div>
                </div>
              </div>
              
              <!-- ×˜×•×¤×¡ ×™×¦×™×¨×ª ×§×©×¨ -->
              <div class="contact-form-card">
                <h3 class="contact-form-title">×× ×™ ×¨×•×¦×” ×œ×”×ª××¨×— ×›××Ÿ</h3>
                <form id="sidebarContactForm" class="sidebar-contact-form">
                  <div class="form-group">
                    <label for="full-name-sidebar">×©× ××œ×</label>
                    <input type="text" id="full-name-sidebar" name="full-name" placeholder="×”×›× ×¡ ××ª ×©××š ×”××œ×" required>
                  </div>

                  <div class="form-group">
                    <label for="email-sidebar">×›×ª×•×‘×ª ×“×•××¨ ××œ×§×˜×¨×•× ×™</label>
                    <input type="email" id="email-sidebar" name="email" placeholder="×”×›× ×¡ ××ª ×›×ª×•×‘×ª ×”×“×•××¨ ×”××œ×§×˜×¨×•× ×™ ×©×œ×š" required>
                  </div>

                  <div class="form-group">
                    <label for="phone-sidebar">××¡×¤×¨ ×˜×œ×¤×•×Ÿ</label>
                    <input type="tel" id="phone-sidebar" name="phone" placeholder="×”×›× ×¡ ××ª ××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×©×œ×š" required>
                  </div>

                  <div class="form-group">
                    <label for="guests-sidebar">×‘×—×™×¨×ª ×”×¨×›×‘</label>
                    <select id="guests-sidebar" name="guests">
                      <option value="1">1 × ×•×¤×©</option>
                      <option value="2" selected>2 × ×•×¤×©×™×</option>
                      <option value="3">3 × ×•×¤×©×™×</option>
                      <option value="4">4 × ×•×¤×©×™×</option>
                      <option value="5">5 × ×•×¤×©×™×</option>
                      <option value="6">6 × ×•×¤×©×™×</option>
                      <option value="7">7 × ×•×¤×©×™×</option>
                      <option value="8">8 × ×•×¤×©×™×</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="checkin-sidebar">×¦'×§-××™×Ÿ</label>
                    <input type="date" id="checkin-sidebar" name="checkin" required>
                  </div>

                  <div class="form-group">
                    <label for="checkout-sidebar">×¦'×§-×××•×˜</label>
                    <input type="date" id="checkout-sidebar" name="checkout" required>
                  </div>

                  <div class="form-group">
                    <label for="special-requests-sidebar">×‘×§×©×•×ª ××™×•×—×“×•×ª</label>
                    <textarea id="special-requests-sidebar" name="special-requests" placeholder="××•×–×× ×™× ×œ×”×•×¡×™×£ ×‘×§×©×” ×œ××§×•× ×”××™×¨×•×—" rows="3"></textarea>
                  </div>

                  <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="offers-sidebar" name="offers">
                      <span class="checkmark"></span>
                      ××¢×•× ×™×™×Ÿ ×œ×§×‘×œ ××‘×¦×¢×™× ×‘×“×•××¨ ××œ×§×˜×¨×•× ×™
                    </label>
                  </div>

                  <button type="submit" class="submit-btn-sidebar">×—×–×¨×• ××œ×™</button>
                </form>
              </div>
            </div>
          </div>

          

          <!-- ×›×¤×ª×•×¨×™ ×§×©×¨ ×¦×¤×™× -->
          <div class="floating-contact-buttons">
            <button class="floating-contact-btn floating-phone-btn" onclick={`window.location.href='tel:${property.phone}'`}>
              <span class="floating-btn-icon">ğŸ“</span>
              <span class="floating-btn-text">{i18next.t("property.call")}</span>
            </button>
            <button class="floating-contact-btn floating-whatsapp-btn" onclick={`window.location.href='https://wa.me/${property.whatsapp}?text=${encodeURIComponent('×©×œ×•×, ×× ×™ ××¢×•× ×™×™×Ÿ ×œ×©××•×œ ×¢×œ ×”×“×™×¨×”: ' + property.title)}'`}>
              <span class="floating-btn-icon">ğŸ’¬</span>
              <span class="floating-btn-text">{i18next.t("property.whatsapp")}</span>
            </button>
          </div>

<!-- ××•×“××œ ×œ×”×¦×’×ª ×›×œ ×”×ª××•× ×•×ª -->
<div class="gallery-modal" id="galleryModal">
  <div class="gallery-modal-content">
    <span class="close">&times;</span>
    <div class="full-gallery-container">
      <button class="prev-btn">&#10094;</button>
      <div class="full-gallery" id="fullGallery">
        {images.map((img, i) => (
          <img
            src={img}
            alt={`×ª××•× ×” ${i + 1} ×©×œ ${property?.title}`}
            class="gallery-image"
            data-index={i}
          />
        ))}
      </div>
      <button class="next-btn">&#10095;</button>
    </div>
  </div>
</div>

<!-- ××•×“××œ ×œ××¤×” -->
<div class="map-modal" id="mapModal">
  <div class="map-modal-content">
    <span class="close-map">&times;</span>
    <div class="map-container">
      <iframe 
        src={`https://www.google.com/maps/embed/v1/place?key=YOUR_API_KEY&q=${property.location.city}+${property.location.street}+${property.location.number}`}
        width="100%" 
        height="100%" 
        style="border:0;" 
        allowfullscreen="" 
        loading="lazy" 
        referrerpolicy="no-referrer-when-downgrade">
      </iframe>
              </div>
            </div>
          </div>

          

          <!-- ×˜×•×¤×¡ ×™×¦×™×¨×ª ×§×©×¨ -->
        </>
      ) : (
        <p class="detail-not-found">{i18next.t("property.notFound")}</p>
      )}
    </main>
    <script type="module">
      let currentImageIndex = 0;

      function changeImage(direction) {
        const images = document.querySelectorAll('.full-gallery img');
        currentImageIndex = (currentImageIndex + direction + images.length) % images.length;
        const newScrollPosition = images[currentImageIndex].offsetLeft;
        document.getElementById('fullGallery').scrollTo({
          left: newScrollPosition,
          behavior: 'smooth'
        });
      }

      function openGallery() {
        const fullScreenModal = document.getElementById("galleryModal");
        if (fullScreenModal) {
          fullScreenModal.style.display = "flex";
        }
      }

      function closeGallery() {
        const fullScreenModal = document.getElementById("galleryModal");
        if (fullScreenModal) {
          fullScreenModal.style.display = "none";
        }
      }

      function openMapOverlay() {
        const mapModal = document.getElementById("mapModal");
        if (mapModal) {
          mapModal.style.display = "flex";
        }
      }

      function closeMapOverlay() {
        const mapModal = document.getElementById("mapModal");
        if (mapModal) {
          mapModal.style.display = "none";
        }
      }

      // ×¤×•× ×§×¦×™×” ×œ×¤×ª×™×—×ª ××¤×” ×‘-Google Maps
      function openGoogleMaps() {
        const city = "{property.location.city}";
        const street = "{property.location.street}";
        const number = "{property.location.number}";
        const address = `${city}+${street}`;
        const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`;
        window.open(mapsUrl, '_blank');
      }

      function updateImageCounter(index) {
        const currentIndexElement = document.getElementById("currentImageIndex");
        if (currentIndexElement) {
          currentIndexElement.textContent = index + 1;
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        function changeImageMain(event) {
          const newImageSrc = event.target.src;
          const mainImage = document.getElementById("detailMainImage");
          const imageIndex = parseInt(event.target.getAttribute("data-index"));
          
          if (mainImage) {
            mainImage.src = newImageSrc;
            currentImageIndex = imageIndex;
            updateImageCounter(imageIndex);
          }
        }

        // ×—×™×‘×•×¨ ×œ×ª××•× ×•×ª ×”×§×˜× ×•×ª
        const thumbs = document.querySelectorAll(".detail-thumb-fullwidth");
        thumbs.forEach(thumb => {
          thumb.addEventListener("click", changeImageMain);
        });

        // ×—×™×‘×•×¨ ×œ×ª××•× ×” ×”×¨××©×™×ª
        const mainImage = document.getElementById("detailMainImage");
        if (mainImage) {
          mainImage.addEventListener("click", openGallery);
        }

        // ×›×¤×ª×•×¨ "×¢×•×“ ×ª××•× ×•×ª"
        const moreImagesButton = document.querySelector(".more-images-fullwidth");
        if (moreImagesButton) {
          moreImagesButton.addEventListener("click", openGallery);
        }

        // ×›×¤×ª×•×¨×™ × ×™×•×•×˜ ×‘××•×“××œ
        const prevButton = document.querySelector(".prev-btn");
        const nextButton = document.querySelector(".next-btn");

        if (prevButton) {
          prevButton.addEventListener("click", function() {
            changeImage(-1);
          });
        }

        if (nextButton) {
          nextButton.addEventListener("click", function() {
            changeImage(1);
          });
        }

        // ×›×¤×ª×•×¨ ×¡×’×™×¨×ª ×’×œ×¨×™×”
        const closeButton = document.querySelector(".close");
        if (closeButton) {
          closeButton.addEventListener("click", closeGallery);
        }
        
        // ×›×¤×ª×•×¨ ×¡×’×™×¨×ª ××¤×”
        const closeMapButton = document.querySelector(".close-map");
        if (closeMapButton) {
          closeMapButton.addEventListener("click", closeMapOverlay);
        }

        // ×¡×’×™×¨×ª ××•×“××œ×™× ×‘×œ×—×™×¦×” ××—×•×¥ ×œ×ª×•×›×Ÿ
        const galleryModal = document.getElementById("galleryModal");
        const mapModal = document.getElementById("mapModal");

        if (galleryModal) {
          galleryModal.addEventListener("click", function(e) {
            if (e.target === galleryModal) {
              closeGallery();
            }
          });
        }

        if (mapModal) {
          mapModal.addEventListener("click", function(e) {
            if (e.target === mapModal) {
              closeMapOverlay();
            }
          });
        }

        // ×”×•×¡×¤×ª ×”×¤×•× ×§×¦×™×•×ª ×œ×’×œ×•×‘×œ
        window.openGoogleMaps = openGoogleMaps;
        window.openMapOverlay = openMapOverlay;

        // ×× ×™××¦×™×” ×œ×›×¤×ª×•×¨×™× ×”×¦×¤×™×
        const floatingButtons = document.querySelectorAll('.floating-contact-btn');
        floatingButtons.forEach((button, index) => {
          // ×× ×™××¦×™×” ×©×œ ×”×•×¤×¢×”
          button.style.opacity = '0';
          button.style.transform = 'translateY(50px)';
          
          setTimeout(() => {
            button.style.transition = 'all 0.5s ease';
            button.style.opacity = '1';
            button.style.transform = 'translateY(0)';
          }, 500 + (index * 200));
          
          // ×× ×™××¦×™×” ×©×œ ×¨×˜×˜
          button.addEventListener('mouseenter', function() {
            this.style.animation = 'pulse 0.6s ease-in-out';
          });
          
          button.addEventListener('animationend', function() {
            this.style.animation = '';
          });
        });

        // ×˜×™×¤×•×œ ×‘×˜×•×¤×¡ ×™×¦×™×¨×ª ×§×©×¨
        const sidebarContactForm = document.getElementById("sidebarContactForm");
        if (sidebarContactForm) {
          sidebarContactForm.addEventListener("submit", async function(e) {
            e.preventDefault();
            
            const formData = new FormData(sidebarContactForm);
            const data = Object.fromEntries(formData.entries());
            
            // ×”×•×¡×¤×ª ×¤×¨×˜×™ ×”× ×›×¡
            data.propertyId = "{property.id}";
            data.propertyTitle = "{property.title}";
            data.propertyPrice = "{property.price}";
            
            try {
              // ×›××Ÿ ×ª×•×›×œ ×œ×”×•×¡×™×£ ×©×œ×™×—×” ×œ×©×¨×ª
              console.log("×˜×•×¤×¡ × ×©×œ×—:", data);
              
              // ×”×•×“×¢×ª ×”×¦×œ×—×”
              alert("×ª×•×“×”! ×¤× ×™×™×ª×š × ×©×œ×—×” ×‘×”×¦×œ×—×”. × ×—×–×•×¨ ××œ×™×š ×‘×”×§×“×.");
              sidebarContactForm.reset();
              
            } catch (error) {
              console.error("×©×’×™××” ×‘×©×œ×™×—×ª ×”×˜×•×¤×¡:", error);
              alert("××™×¨×¢×” ×©×’×™××” ×‘×©×œ×™×—×ª ×”×¤× ×™×™×”. ×× × × ×¡×” ×©×•×‘.");
            }
          });
        }
      });
    </script>
  </body>
</html>