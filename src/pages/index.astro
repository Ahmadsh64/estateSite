---
import fs from "fs";
import path from "path";

// ×”×’×“×¨×ª ×˜×™×¤×•×¡ ×œ×›×œ ×¤×¨×•×¤×¨×˜×™
interface Property {
  id: number;
  title: string;
  price: string;
  location: string;
  description: string;
  image: string;
}

const filePath = path.resolve("./src/data/properties.json");
let properties: Property[] = [];

if (fs.existsSync(filePath)) {
  const fileData = fs.readFileSync(filePath, "utf-8");
  properties = JSON.parse(fileData) as Property[];
}
---
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <title>×¨×©×™××ª ×“×™×¨×•×ª</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body dir="rtl">
<header>
  <div class="logo">
    <img src="/images/logo.png" alt="×œ×•×’×• ×”×—×‘×¨×”" />
    <span>×—×‘×¨×ª ×“×™×¨×•×ª</span>
  </div>

  <nav>
    <a href="/">×›×œ ×”×“×™×¨×•×ª</a>
    <a href="/filter/price">×¢×“ 1,000,000 â‚ª</a>
    <a href="/filter/center">××¨×›×–</a>
    <a href="/filter/north">×¦×¤×•×Ÿ</a>
  </nav>

  <a href="/admin/login" class="admin-btn">×›× ×™×¡×ª ×× ×”×œ</a>
</header>
<section class="hero">
  <div class="overlay">
    <h1>×—×‘×¨×ª ×“×™×¨×•×ª - ×”×‘×™×ª ×”×—×“×© ×©×œ×š ××ª×—×™×œ ×›××Ÿ</h1>
    <p>××¦× ××ª ×”×“×™×¨×” ×”××•×©×œ××ª ××ª×•×š ×××•×ª × ×›×¡×™×</p>
    <form class="filters">
      <select name="transaction">
        <option value="">×¡×•×’ ×¢×¡×§×”</option>
        <option value="××›×™×¨×”">××›×™×¨×”</option>
        <option value="×”×©×›×¨×”">×”×©×›×¨×”</option>
      </select>

      <select name="location">
        <option value="">××–×•×¨</option>
        <option value="×¦×¤×•×Ÿ">×¦×¤×•×Ÿ</option>
        <option value="××¨×›×–">××¨×›×–</option>
        <option value="×“×¨×•×">×“×¨×•×</option>
      </select>

      <select name="rooms">
        <option value="">×—×“×¨×™×</option>
        <option value="2">2+</option>
        <option value="3">3+</option>
        <option value="4">4+</option>
        <option value="5">5+</option>
      </select>

      <button type="submit">×—×¤×© ğŸ”</button>
    </form>
  </div>
</section>

  <main>
    <ul>
      {properties.map((p: Property) => (
        <li>
          <a href={`/${p.id}`}>
            <img src={p.image} alt={p.title} />
            <h2>{p.title}</h2>
            <p>××—×™×¨: {p.price}</p>
            <p>××™×§×•×: {p.location}</p>
          </a>
        </li>
      ))}
    </ul>
  </main>
</body>
</html>
